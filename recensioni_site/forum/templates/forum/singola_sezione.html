{% extends 'base.html' %}

{% block head_title %} {{ block.super }}- {{ sezione.nome_sezione }} {% endblock head_title %}

{% block content %}


<div class=center>
    <!--Carousel Wrapper-->
    <div id="carousel-example-1z" class="carousel slide carousel-fade" data-ride="carousel">
        <!--Indicators-->
        <ol class="carousel-indicators">
            {% for img in immagini %}
            <li data-target="#carousel-example-1z" data-slide-to="{{ forloop.counter0 }}"
                class="{% if forloop.counter0 == 0 %} active {% endif %}"></li>
            {% endfor %}
        </ol>
        <!--/.Indicators-->
        <!--Slides-->
        <div class="carousel-inner" role="listbox">
            {% for img in immagini %}
            <div class="carousel-item {% if forloop.counter0 == 0 %} active {% endif %}">
                <img class="d-block w-100" src="{{img.logo_sezione.url}}" alt="First slide">
            </div>
            {% endfor %}
            <!--/First slide-->
            <!--/.Slides-->
            <!--Controls-->
            <a class="carousel-control-prev" href="#carousel-example-1z" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carousel-example-1z" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
            <!--/.Controls-->
        </div>
        <br>
    </div>
</div>
<div class=center1>
    <div id="titlebar" class="listing-titlebar">
        <div class="listing-titlebar-title">
            <h2>{{sezione.nome_sezione}} <span class="listing-tag">Eat &amp; Drink</span></h2>


        </div>
        <p>{{sezione.descrizione}}</p>
    </div>
    </div>
    <br>
<div class=center1>
    <div id="map-canvas" style="width:100%;height:400px;"></div>
</div>
<script src="https://maps.googleapis.com/maps/api/js?key=&libraries=places"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    
<script>

    let map;
        let service;
        let infowindow;

    function initialize() {

            var myLatLng = new google.maps.LatLng(45.4375, 12.3358),
                myOptions = {
                    zoom: 5,
                    center: myLatLng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                },
                map = new google.maps.Map(document.getElementById('map-canvas'), myOptions),
                marker = new google.maps.Marker({
                    position: myLatLng,
                    map: map
                });

                const request = {
            query: "Museum of Contemporary Art Australia",
            fields: ["name", "geometry"]
        };
        service = new google.maps.places.PlacesService(map);
        service.findPlaceFromQuery(request, (results, status) => {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
                for (let i = 0; i < results.length; i++) {
                    createMarker(results[i]);
                }

                map.setCenter(results[0].geometry.location);
            }
        });

           

        }

        function createMarker(place) {
                const marker = new google.maps.Marker({
                    map,
                    position: place.geometry.location
                });
                google.maps.event.addListener(marker, "click", () => {
                    infowindow.setContent(place.name);
                    infowindow.open(map);
                });
            }


        

            function initMap() {
                const sydney = new google.maps.LatLng(-33.867, 151.195);
                infowindow = new google.maps.InfoWindow();
                map = new google.maps.Map(document.getElementById("map"), {
                    center: sydney,
                    zoom: 15
                });
                
            }

            

        initialize();   
</script>

        <style>
            .carousel-inner {

                max-height: 500px;

            }
             img{

                    max-height: 500px;
                }

            .center1 {
                margin: auto;
                width: 59%;
                padding: 20px;
                border-radius: 10px;
                border: 1px solid #9C9C9C;
                background-color: #EAEAEA;
            }

            .center {
                margin: auto;
                width: 59%;
                margin-top: 120px;

                padding: 20px;
                border-radius: 10px;
            }

            .listing-section {
                display: inline-block;
                width: 100%;
            }
        </style>

        {% endblock content %}